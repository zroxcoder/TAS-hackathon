<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>User Profile - EduMate</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../css/dashboard.css"/>
    <link rel="stylesheet" href="../css/profile.css"/>
</head>

<body id="themebody" class="light-theme">

<div class="d-flex">

    <!-- Sidebar -->
    <nav id="sidebar" class="sidebar bg-light-orange text-dark p-3">
        <h3 class="text-center mb-4 fw-bold">EduMate</h3>

        <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="./dashboard.html">Dashboard</a></li>
            <li class="nav-item"><a class="nav-link" href="./notes.html">Notes</a></li>
            <li class="nav-item"><a class="nav-link" href="./tasks.html">Planner</a></li>
            <li class="nav-item"><a class="nav-link" href="./projects.html">Projects</a></li>
            <li class="nav-item"><a class="nav-link" href="./courses.html">Courses</a></li>
            <li class="nav-item"><a class="nav-link active" href="./profile.html">Profile/Settings</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="content p-4 flex-grow-1">
        <h2>User Profile</h2>
        <hr/>

        <!-- Profile Section -->
        <div class="profile-card p-4">
            <div class="d-flex">
                <img id="profilePicPreview" class="profile-pic" src="../assets/default-user.png" alt="Profile Picture"/>

                <div class="ms-4 flex-grow-1">
                    <label class="form-label fw-bold">Profile Picture</label>
                    <input type="file" id="profilePic" class="form-control" accept="image/*"/>

                    <label class="form-label mt-3 fw-bold">Name</label>
                    <input type="text" id="profileName" class="form-control" placeholder="Enter your name">

                    <label class="form-label mt-3 fw-bold">Bio</label>
                    <textarea id="profileBio" class="form-control" placeholder="Tell something about you..."></textarea>

                    <button class="btn btn-dark mt-3" id="saveProfile">Save Profile</button>
                </div>
            </div>
        </div>

        <hr/>

        <!-- Certificates -->
        <h4 class="mt-4">Your Certificates</h4>
        <div class="certificate-upload mt-2">
            <input type="file" id="certificateInput" multiple accept="image/*,.pdf"/>
            <button class="btn btn-dark mt-2" id="uploadCertificate">Upload Certificate</button>
        </div>

        <div class="row mt-4" id="certificateContainer"></div>

        <hr/>

        <!-- Progress Section -->
        <h4>Your Study Progress</h4>
        <canvas id="progressChart" height="120"></canvas>

        <hr/>

        <!-- Recent Activity -->
        <h4>Recent Activity</h4>
        <ul class="list-group" id="activityList"></ul>

        <hr/>

        <!-- Settings -->
        <h4>Settings</h4>

        <div class="settings-card p-3">
            <div class="mb-3">
                <button class="btn btn-outline-dark w-100" id="exportData">Export Data (JSON)</button>
            </div>

            <div class="mb-3">
                <input type="file" id="importDataFile" class="form-control mb-2" accept=".json"/>
                <button class="btn btn-dark w-100" id="importData">Import Data</button>
            </div>

            <button class="btn btn-danger w-100" id="clearData">Clear All Data</button>

            <div class="form-check form-switch mt-4">
                <input class="form-check-input" type="checkbox" id="notifyToggle">
                <label class="form-check-label">Enable Notifications</label>
            </div>

        </div>

    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- FIXED ORDER: db.js FIRST -->
<script src="../js/db.js"></script>
<script src="../js/profile.js"></script>

</body>
</html>
